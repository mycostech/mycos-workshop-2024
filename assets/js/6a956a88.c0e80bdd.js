"use strict";(self.webpackChunkreact_cmu_docs_2024=self.webpackChunkreact_cmu_docs_2024||[]).push([[9053],{7085:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>r});var o=e(4848),s=e(8453);const i={sidebar_position:2},a="Custom Hook",c={id:"tutorial-extras/custom-hook",title:"Custom Hook",description:"We can creating custom hook for reuseable purpose or separate logic that not have any HTML for clean code.",source:"@site/docs/tutorial-extras/custom-hook.md",sourceDirName:"tutorial-extras",slug:"/tutorial-extras/custom-hook",permalink:"/mycos-workshop-2024/docs/tutorial-extras/custom-hook",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"React Hook",permalink:"/mycos-workshop-2024/docs/tutorial-extras/react-hook"},next:{title:"Design Pattern",permalink:"/mycos-workshop-2024/docs/tutorial-extras/design-pattern"}},l={},r=[{value:"naming",id:"naming",level:2},{value:"Rules of Hooks",id:"rules-of-hooks",level:2},{value:"example",id:"example",level:2}];function d(n){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"custom-hook",children:"Custom Hook"})}),"\n",(0,o.jsx)(t.p,{children:"We can creating custom hook for reuseable purpose or separate logic that not have any HTML for clean code."}),"\n",(0,o.jsx)(t.h2,{id:"naming",children:"naming"}),"\n",(0,o.jsxs)(t.p,{children:["create with ",(0,o.jsx)(t.code,{children:"camelCase"})," and state with ",(0,o.jsx)(t.code,{children:"use"})," both file and function name"]}),"\n",(0,o.jsx)(t.h2,{id:"rules-of-hooks",children:"Rules of Hooks"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Only call Hooks at the top level"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"function Counter() {\n\t// \u2705 Good: top-level in a function component\n\tconst [count, setCount] = useState(0)\n\t// ...\n}\n\nfunction useWindowWidth() {\n\t// \u2705 Good: top-level in a custom Hook\n\tconst [width, setWidth] = useState(window.innerWidth)\n\t// ...\n}\n"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Do not call Hooks inside conditions or loops."}),"\n",(0,o.jsx)(t.li,{children:"Do not call Hooks after a conditional return statement."}),"\n",(0,o.jsx)(t.li,{children:"Do not call Hooks in event handlers."}),"\n",(0,o.jsx)(t.li,{children:"Do not call Hooks in class components."}),"\n",(0,o.jsx)(t.li,{children:"Do not call Hooks inside functions passed to useMemo, useReducer, or useEffect."}),"\n",(0,o.jsx)(t.li,{children:"Do not call Hooks inside try/catch/finally blocks."}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"function Bad({ cond }) {\n\tif (cond) {\n\t\t// \ud83d\udd34 Bad: inside a condition (to fix, move it outside!)\n\t\tconst theme = useContext(ThemeContext)\n\t}\n\t// ...\n}\n\nfunction Bad() {\n\tfor (let i = 0; i < 10; i++) {\n\t\t// \ud83d\udd34 Bad: inside a loop (to fix, move it outside!)\n\t\tconst theme = useContext(ThemeContext)\n\t}\n\t// ...\n}\n\nfunction Bad({ cond }) {\n\tif (cond) {\n\t\treturn\n\t}\n\t// \ud83d\udd34 Bad: after a conditional return (to fix, move it before the return!)\n\tconst theme = useContext(ThemeContext)\n\t// ...\n}\n\nfunction Bad() {\n\tfunction handleClick() {\n\t\t// \ud83d\udd34 Bad: inside an event handler (to fix, move it outside!)\n\t\tconst theme = useContext(ThemeContext)\n\t}\n\t// ...\n}\n\nfunction Bad() {\n\tconst style = useMemo(() => {\n\t\t// \ud83d\udd34 Bad: inside useMemo (to fix, move it outside!)\n\t\tconst theme = useContext(ThemeContext)\n\t\treturn createStyle(theme)\n\t})\n\t// ...\n}\n\nclass Bad extends React.Component {\n\trender() {\n\t\t// \ud83d\udd34 Bad: inside a class component (to fix, write a function component instead of a class!)\n\t\tuseEffect(() => {})\n\t\t// ...\n\t}\n}\n\nfunction Bad() {\n\ttry {\n\t\t// \ud83d\udd34 Bad: inside try/catch/finally block (to fix, move it outside!)\n\t\tconst [x, setX] = useState(0)\n\t} catch {\n\t\tconst [x, setX] = useState(1)\n\t}\n}\n"})}),"\n",(0,o.jsxs)(t.ol,{start:"2",children:["\n",(0,o.jsx)(t.li,{children:"Only call Hooks from React functions"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"function FriendList() {\n\tconst [onlineStatus, setOnlineStatus] = useOnlineStatus() // \u2705\n}\n\nfunction setOnlineStatus() {\n\t// \u274c Not a component or custom Hook!\n\tconst [onlineStatus, setOnlineStatus] = useOnlineStatus()\n}\n"})}),"\n",(0,o.jsxs)(t.ol,{start:"3",children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Don\u2019t dynamically mutate a Hook"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"function ChatInput() {\n\tconst useDataWithLogging = withLogging(useData) // \ud83d\udd34 Bad: don't write higher order Hooks\n\tconst data = useDataWithLogging()\n}\n\n//////\nfunction ChatInput() {\n\tconst data = useDataWithLogging() // \u2705 Good: Create a new version of the Hook\n}\n\nfunction useDataWithLogging() {\n\t// ... Create a new version of the Hook and inline the logic here\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"example"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"// useCalAge.ts\n\nconst useCalAge = () => {\n    const [isPass, setIsPass] = useState(false)\n\n    const calAge = (age: number) => {\n        if (age >= 20) {\n            setIsPass(true)\n        } else {\n            setIsPass(false)\n        }\n    }\n\n    return [isPass, callAge] as const\n    // as const is tell typescript compiler cast type specifically\n}\n\n// use in component\nconst Component = () => {\n    // since it return with array so free declare variable but need to correct index.\n    const [isCanGoToPub, callMyAge] = useCalAge()\n\n    callMyAge(19)\n\n    // isCanGoToPub is fakse\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"Another example"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"// useMultiply.ts\n\nconst useMultiply = () => {\n\tconst [result, setResult] = useState(0)\n\n\tconst calMulti = (a: number, b: number) => {\n\t\tsetResult(a * b)\n\t}\n\n\treturn {\n\t\tresult,\n\t\tcalMulti,\n\t}\n}\n\n// use in Component\nconst Component = () => {\n\t// since it return with Object so we declare with object(Spread syntax) and can change name with : but not specifically index\n\tconst { calMulti: calMultiply, result: multiplyResult } = useMultiply()\n\n\tcalMultiply(10, 5)\n\t// multiplyResult is 50\n\n\tcalMulti(10, 10) // error since we already change default name\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"Get Size of Window Hook"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:'// useWindowSize.ts\n\nconst useWindowSize = () => {\n\tconst [windowSize, setWindowSize] = useState({\n\t\twidth: undefined,\n\t\theight: undefined,\n\t})\n\n\tuseEffect(() => {\n\t\t// Handler to call on window resize\n\t\tfunction handleResize() {\n\t\t\t// Set window width/height to state\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight,\n\t\t\t})\n\t\t}\n\n\t\t// Add event listener\n\t\twindow.addEventListener("resize", handleResize)\n\n\t\t// Call handler right away so state gets updated with initial window size\n\t\thandleResize()\n\n\t\t// Remove event listener on cleanup\n\t\treturn () => window.removeEventListener("resize", handleResize)\n\t}, [])\n\n\treturn windowSize\n}\n'})})]})}function u(n={}){const{wrapper:t}={...(0,s.R)(),...n.components};return t?(0,o.jsx)(t,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453:(n,t,e)=>{e.d(t,{R:()=>a,x:()=>c});var o=e(6540);const s={},i=o.createContext(s);function a(n){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),o.createElement(i.Provider,{value:t},n.children)}}}]);